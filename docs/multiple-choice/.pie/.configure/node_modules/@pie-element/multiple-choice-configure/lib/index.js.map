{"version":3,"sources":["../src/index.js"],"names":["log","prepareCustomizationObject","model","defaultValues","promptLabel","responseTypeLabel","choicesLabel","addChoiceButtonLabel","enableSelectChoiceLabel","enableSelectResponseType","enableAddChoice","enableAddFeedBack","enableDeleteChoice","configure","HTMLElement","constructor","onModelChanged","bind","s","_model","utils","normalizeChoices","_render","dispatchModelUpdated","reset","resetValue","dispatchEvent","ModelUpdatedEvent","m","insertImage","handler","InsertImageEvent","onDeleteImage","src","done","DeleteImageEvent","element","React","createElement","Root","imageSupport","add","delete","ReactDOM","render"],"mappings":";;;;;;;;AAAA;;AAMA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;AAEA,MAAMA,MAAM,qBAAM,2BAAN,CAAZ;;AAEA,MAAMC,6BAA8BC,KAAD,IAAW;AAC5C,QAAMC,gBAAgB;AACpBC,iBAAc,QADM;AAEpBC,uBAAmB,eAFC;AAGpBC,kBAAc,eAHM;AAIpBC,0BAAsB,cAJF;AAKpBC,6BAAyB,IALL;AAMpBC,8BAA0B,IANN;AAOpBC,qBAAiB,IAPG;AAQpBC,uBAAmB,IARC;AASpBC,wBAAoB;AATA,GAAtB;;AAYA,sBACKV,KADL;AAEEW,eAAW,wBAASX,MAAMW,SAAf,EAA0BV,aAA1B;AAFb;AAID,CAjBD;;kBAmBe,cAAcW,WAAd,CAA0B;AACvCC,gBAAc;AACZ;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACD;;AAED,MAAIf,KAAJ,CAAUgB,CAAV,EAAa;AACX,SAAKC,MAAL,GAAclB,2BAA2BmB,sBAAMC,gBAAN,CAAuBH,CAAvB,CAA3B,CAAd;AACA,SAAKI,OAAL;AACD;;AAEDC,uBAAqBC,KAArB,EAA4B;AAC1B,UAAMC,aAAa,CAAC,CAACD,KAArB;;AAEA,SAAKE,aAAL,CAAmB,IAAIC,qCAAJ,CAAsB,KAAKR,MAA3B,EAAmCM,UAAnC,CAAnB;AACD;;AAEDT,iBAAeY,CAAf,EAAkBJ,KAAlB,EAAyB;AACvB,SAAKL,MAAL,GAAcS,CAAd;AACA,SAAKL,oBAAL,CAA0BC,KAA1B;AACD;;AAED;;;;AAIAK,cAAYC,OAAZ,EAAqB;AACnB,SAAKJ,aAAL,CAAmB,IAAIK,oCAAJ,CAAqBD,OAArB,CAAnB;AACD;;AAEDE,gBAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvB,SAAKR,aAAL,CAAmB,IAAIS,oCAAJ,CAAqBF,GAArB,EAA0BC,IAA1B,CAAnB;AACD;;AAEDZ,YAAU;AACRtB,QAAI,SAAJ;AACA,QAAIoC,UAAUC,gBAAMC,aAAN,CAAoBC,cAApB,EAA0B;AACtCrC,aAAO,KAAKiB,MAD0B;AAEtCH,sBAAgB,KAAKA,cAFiB;AAGtCwB,oBAAc;AACZC,aAAK,KAAKZ,WAAL,CAAiBZ,IAAjB,CAAsB,IAAtB,CADO;AAEZyB,gBAAQ,KAAKV,aAAL,CAAmBf,IAAnB,CAAwB,IAAxB;AAFI;AAHwB,KAA1B,CAAd;AAQA0B,uBAASC,MAAT,CAAgBR,OAAhB,EAAyB,IAAzB;AACD;AA7CsC,C","file":"index.js","sourcesContent":["import {\n  DeleteImageEvent,\n  InsertImageEvent,\n  ModelUpdatedEvent\n} from '@pie-framework/pie-configure-events';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './root';\nimport debug from 'debug';\nimport { choiceUtils as utils } from '@pie-lib/config-ui';\nimport defaults from 'lodash/defaults';\n\nconst log = debug('multiple-choice:configure');\n\nconst prepareCustomizationObject = (model) => {\n  const defaultValues = {\n    promptLabel : 'Prompt',\n    responseTypeLabel: 'Response Type',\n    choicesLabel: 'Choice Labels',\n    addChoiceButtonLabel: 'Add a choice',\n    enableSelectChoiceLabel: true,\n    enableSelectResponseType: true,\n    enableAddChoice: true,\n    enableAddFeedBack: true,\n    enableDeleteChoice: true\n  };\n\n  return {\n    ...model,\n    configure: defaults(model.configure, defaultValues)\n  };\n};\n\nexport default class extends HTMLElement {\n  constructor() {\n    super();\n    this.onModelChanged = this.onModelChanged.bind(this);\n  }\n\n  set model(s) {\n    this._model = prepareCustomizationObject(utils.normalizeChoices(s));\n    this._render();\n  }\n\n  dispatchModelUpdated(reset) {\n    const resetValue = !!reset;\n\n    this.dispatchEvent(new ModelUpdatedEvent(this._model, resetValue));\n  }\n\n  onModelChanged(m, reset) {\n    this._model = m;\n    this.dispatchModelUpdated(reset);\n  }\n\n  /**\n   *\n   * @param {done, progress, file} handler\n   */\n  insertImage(handler) {\n    this.dispatchEvent(new InsertImageEvent(handler));\n  }\n\n  onDeleteImage(src, done) {\n    this.dispatchEvent(new DeleteImageEvent(src, done));\n  }\n\n  _render() {\n    log('_render');\n    let element = React.createElement(Root, {\n      model: this._model,\n      onModelChanged: this.onModelChanged,\n      imageSupport: {\n        add: this.insertImage.bind(this),\n        delete: this.onDeleteImage.bind(this)\n      }\n    });\n    ReactDOM.render(element, this);\n  }\n}\n"]}